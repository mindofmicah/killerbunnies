<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <title></title>

        

<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
<style type="text/css">
        @font-face {
                    font-family: 'Enviro';
                                    src: url('../webfont.eot'); /* IE9 Compat Modes */
                                                        src: url('Enviro LET.ttf')  format('truetype');
                                                                            }
                    body{
                    font-family:'Enviro';
                    }
                    .btn{font-family:Tahoma, Arial;}
</style>
<style type="text/css">.show-me{display:block !important;}</style>
</head>
<body>
<div class="container">
    <div id="content">
        <div id="player-management" style="display:none;">
            <div class="panel panel-default" style="margin-top:20px;">
                <div class="panel-heading"><h2 class="text-center" style="margin:0;">Who is playing?</h2></div>
                <div class="panel-body">
                    <form action="#" id="add-player-form">
                        <div class="form-group">
                            <label class="control-label" for="">Player Name</label>
                            <input class="form-control" type="text" value="" placeholder="Little Flett"/>
                        </div>
                        <div class="text-right">
                            <input class="btn btn-primary" type="submit" value="Add Player"/>
                        </div>         
                    </form>
                </div>
                <ul class="list-group" id="player-list-group">
                    <div class="list-group-item">Mo</div>
                    <div class="list-group-item">Frank</div>
                    <div class="list-group-item">Dave</div>
                    <div class="list-group-item">Flett</div>
                </ul>
            </div>
            <div class="text-center">
                <a class="btn btn-lg btn-primary" href="#">Start Game</a>
            </div>
        </div>
        <div id="game-view" style="display:none;">
            <div class="panel panel-default">
                    <div class="panel-heading">
                            <h2 style="margin:0;" class="text-center">The game is on</h2>
                    </div>
                    <div class="panel-body">
                    <a class="btn btn-lg btn-block btn-danger" id="bunny-died" href="#">A Bunny Died!</a>
                    </div>
                    <ul id="standings-list-group" class="list-group">
                        <li class="list-group-item"><span class="badge">1st</span>MO</li>
                        <li class="list-group-item"><span class="badge">2nd</span>Flett</li>
                    </ul>
            </div>


        </div>

    </div>

</div>



</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" ></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

<script type="text/javascript" src="underscore-min.js"></script>

<script type="text/javascript" src="backbone-min.js"></script>
<script type="text/javascript">


var App = Backbone.View.extend({
    el:$('#content'),
    show : function (path) {
        if (!window[path]) {
            throw new Error('Could not load ' + path);
        }

        this.$el.find('.show-me').removeClass('show-me');
        window[path].$el.addClass('show-me');
    }
});
var app = new App;


var Player = Backbone.Model.extend({

    }),
    PlayerCollection = Backbone.Collection.extend({
        model:Player
    }),
    PlayerManagementView = Backbone.View.extend({
    el:$('#player-management'), 
    events: {
        'submit form' : 'addPlayer',
        'focus input' : 'removeErrors'

    },
    initialize : function () {
        this.input = $('input[type="text"]');

        this.listenTo(this.collection, 'add', this.render);
        this.panel = $('#player-list-group');
    },
    render: function () {
        var panel = this.panel;
    
        panel.empty();
        this.collection.each(function(a,b,c) {
        panel.append('<li class="list-group-item">'+a.get('name')+'</li>');
        });
    },

    addPlayer : function () {
        if (this.input.val() != '') {
            this.collection.add(new Player({name:this.input.val()}));
            this.input.val('').trigger('focus');
        } else {
            this.input.closest('.form-group').addClass('has-error');
        }
    },
    removeErrors : function () {
        this.input.closest('.form-group').removeClass('has-error');
    }
});
var GameView = Backbone.View.extend({
    el : $('#game-view'),
    initialize: function () {
        this.render();
    },
    events : {
        'click #bunny-died' : function () {
            alert('somebody killed a bunny');
        }
    },
    render: function () {
        return this;
    }
});

$('a').click(function (e) {
    e.preventDefault();
    r.navigate('game',{trigger:true});
});
var players = new PlayerCollection;

app = new App;

pmv = new PlayerManagementView({
    collection: players
});
game = new GameView({
    collection: players
});
R = Backbone.Router.extend({
    routes: {
        '': function () {
            app.show('pmv');
        },
        'game':function () {
            app.show('game');
        }
    }
});

r =new R;
Backbone.history.start();


players.add(new Player({name:'MO'}));
players.add(new Player({name:'Franklin'}));
players.add(new Player({name:'Flett'}));
players.add(new Player({name:'Dave'}));
</script>
</html>
